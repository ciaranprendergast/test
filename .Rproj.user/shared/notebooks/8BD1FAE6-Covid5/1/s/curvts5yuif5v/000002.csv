"0",""
"0","library(tidyverse)"
"0","library(RCurl)"
"0","#x <- getURL(""https://raw.githubusercontent.com/frankmoriarty/covid_ie/master/doh_covid_ie_cases_analysis.csv"")"
"0","#data1 <- read.csv(text = x)"
"0","data1 <- read.csv(""C:/Users/ciaranprendergast/AppData/Local/Packages/Microsoft.MicrosoftEdge_8wekyb3d8bbwe/TempState/Downloads/covid_ie-master (1)/covid_ie-master/doh_covid_ie_cases_analysis.csv"")"
"0",""
"0",""
"0","n <- nrow(data1)"
"0",""
"0","total_cases <- as.numeric(data1$cases_cumul)"
"0",""
"0","data1$newcases[1] <- NA"
"0","if (n > 1) for(i in 2:n) data1$newcases[i] <- ( total_cases[i] - total_cases[i-1] )"
"0",""
"0",""
"0","data1$newcases_per[1] <- NA"
"0","if (n > 1) for(i in 2:n) data1$newcases_per[i] <- ( 100*(total_cases[i] - total_cases[i-1])/total_cases[i-1] )"
"0",""
"0",""
"0",""
"0",""
"0",""
"0","total1 <- c(1,1,1,2,6,13,18,19,21,24,34,43,70,90,129,169,data1$cases_cumul)  #this gives the total cases with the manually-typed numbers describing (constant) days not included in csv file"
"0",""
"0","increase2 <- c(NA,NA,NA,NA,NA,NA,NA,5.6,10.5,14.3,41.7,26.5,62.8,28.6,43.3,31,60.36,na.omit(data1$newcases_per))  #this gives us the vector for increase on total, the nas are included to ensure that that the line only starts on the 7th"
"0","earlier.dates <- c(""29-Feb"", ""1-Mar"", ""2-Mar"", ""3-Mar"", ""4-Mar"", ""5-Mar"", ""6-Mar"", ""7-Mar"", ""8-Mar"", ""9-Mar"",""10-Mar"", ""11-Mar"", ""12-Mar"",""13-Mar"", ""14-Mar"", ""15-Mar"")"
"0","dates<- c(earlier.dates,data1$date)"
"0","dates0 <- as.factor(dates)                   #this calls the dates"
"0","dates1 <- as.Date(dates0, format= ""%d-%b"") "
"0","df <- data.frame(increase2,dates1,total1)"
"0",""
"0","ylim.prim <- c(0, 60)   "
"0","ylim.sec <- c(0, 18000)  "
"0",""
"0","b <- diff(ylim.prim)/diff(ylim.sec)"
"0","a <- b*(ylim.prim[1] - ylim.sec[1])"
"0",""
"0","plot <- ggplot(df, aes(dates1, increase2)) +"
"0","  geom_col(aes(color=""tomato4"")) +"
"0","  geom_line(aes(y = a + total1*b), color = ""red"") +"
"0","  scale_y_continuous(""% Increase on Total"", sec.axis = sec_axis(~ (. - a)/b, name = ""Total Cases"")) +"
"0","  scale_x_date(""Dates"") +"
"0","  ggtitle(""Progression of Covid-19 in Ireland"") "
"0",""
"0","plot2 <- plot + scale_color_discrete(name = """", labels = ""% Increase on Total"")"
"0",""
"0","plot2 + theme(legend.key = element_rect(fill = ""lightblue"", color = NA), axis.text=element_text(size=12, face = ""bold""),"
"0","              axis.title=element_text(size=14,face=""bold""), plot.title = element_text(size=16, face = ""bold""))"
