"0",""
"0","library(sf)"
"0","library(tidyverse)"
"0","library(raster)"
"0","library(dplyr)"
"0","library(spData)"
"0","library(tmap)    # for static and interactive maps"
"0","library(tidyverse)"
"0","library(RCurl)"
"0",""
"0","x <- getURL(""https://raw.githubusercontent.com/frankmoriarty/covid_ie/master/2020-29-Apr_covid_ie_cases_analysis.csv"")"
"0","data1 <- read.csv(text = x, stringsAsFactors=FALSE)"
"0",""
"0",""
"0","library(csodata)"
"0",""
"0","shp <- cso_get_geo(""ac"")"
"0",""
"0",""
"0",""
"0",""
"0","x <- getURL(""https://raw.githubusercontent.com/frankmoriarty/covid_ie/master/2020-29-Apr_covid_ie_cases_analysis.csv"")"
"0","newcases <- read.csv(text = x, stringsAsFactors=FALSE)"
"0",""
"0",""
"0","n <- nrow(data1)"
"0","the.date <- data1$date[n]"
"0",""
"0",""
"0","counties_start <- grep(""cases_carlow"", colnames(newcases))"
"0","counties_stop <- grep(""cases_wicklow"", colnames(newcases))"
"0",""
"0","counties <- tibble(newcases[which(newcases$date == the.date ), counties_start:counties_stop])"
"0",""
"0","cso <- read_csv(""counties_population_cso_2016.csv"")"
"0",""
"0","counties <- data.frame(r1=names(counties), t(counties))"
"0","colnames(counties)[2] <- ""cases"""
"0","colnames(counties)[1] <- ""county_doh"""
"0","counties$cases <- as.numeric(as.character(counties$cases))"
"0","counties[,1] <- sub(""cases_"", """", counties[,1])"
"0","counties$cases <- as.numeric(counties$cases)"
"0",""
"0","county_cases <- merge(cso, counties, by=""county_doh"")"
"0",""
"0","county_cases$cases_per_mil <- 1000000*county_cases$cases/county_cases$pop"
"0",""
"0","names(shp)[8] <- ""county"""
"0","shp$county[20]=""Dun Laoghaire-Rathdown"""
"0","county_cases$county[8]=""Dun Laoghaire-Rathdown"""
"0",""
"0","merged_cases <- merge(shp, county_cases, by=""county"")"
"0",""
"0","tm_shape(merged_cases) + tm_fill(col=""cases_per_mil"", style = ""pretty"", title=c(paste(""Cases per million"", the.date))) + tm_borders() + tm_layout(asp = 1.28)"
